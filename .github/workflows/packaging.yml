name: packaging

on:
  pull_request:
  push:
    branches:
      - master
  schedule:
    - cron: '0 0 * * *'

jobs:

  archlinux:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v2
      with:
        submodules: true
    - name: build
      run: |
        docker run -v $PWD:/workspace archlinux:base-devel bash -c "useradd -m user; pacman -Sy --noconfirm cmake boost; cd /workspace/packaging/archlinux; ln -s /workspace tcg; sudo -u user makepkg"